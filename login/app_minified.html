<!DOCTYPE html><html lang=en><meta charset=UTF-8><title>Unilyf Monash - Dashboard</title><meta content="Where Monash Students Connect and Learntogether. Compare timetables with friends at Monash University."name=description><meta content="Compare timetable monash, monash timetable, Unilyf Monash, Learntogether Monash, connect and learntogether Compare timetable with friends Monash"name=keywords><meta content="Ishan Joshi, Arni Mittal, Surayez Rahman"name=copyright><meta content="width=device-width,initial-scale=1,minimum-scale=1"name=viewport><meta content=https://learntog.github.io/login/ property=og:url><meta content=website property=og:type><meta content="Unilyf Monash - Connect and LearnTogether"property=og:title><meta content="Compare timetable with friends. See who's in your class or find free time to hang out at uni."property=og:description><meta content=http://http://cdn2.iconfinder.com/data/icons/crazy-paparazzi-collection-svg/100/Noun_Project_100Icon_10px_grid_2-47-512.png property=og:image><meta content=https://learntog.github.io/img/uniicon.png property=og:image:secure_url><link href=https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.6.0/fullcalendar.css rel=stylesheet><link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel=stylesheet><script src=https://code.jquery.com/jquery-3.2.1.min.js crossorigin=anonymous integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="></script><script src=https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.1/moment.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.6.0/fullcalendar.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js></script><script src=../js/analytics.js></script><script src=../js/makecal.js></script><script>function toggleload(){$("#calendar").toggleClass("opaque")}function thisWeekDay(e){var t=new Date;return e==t.getDay()?t:e<t.getDay()?(t.setDate(t.getDate()-(t.getDay()-e)),t):e>t.getDay()?(t.setDate(t.getDate()+(e-t.getDay())),t):void 0}function drawoncalendar(e,t){if(null!=e&&e.length>0){for(unitcolor={},i=0;i<e.length;i++){var o=e[i].split("*");if(-1==o[o.length-1].split("!!")[0].indexOf("1")){var n=o[2],a=o[3],l=a.split(":")[0],r=a.split(":")[1],s=thisWeekDay({Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6}[n]);s.setHours(l),s.setMinutes(r),s.setSeconds(0);var d=o[0];null==unitcolor.friendstatic&&(unitcolor.friendstatic=getRandomColor()),"my"==t?(null==unitcolor[d]&&(unitcolor[d]=getRandomColor()),createEventCalendarWithTime(unitcolor[d],s,"---",o[0],o[5],e[i])):($("#"+t+"color").css("background",unitcolor.friendstatic),createEventCalendarWithTime(unitcolor.friendstatic,s,t,o[0],o[5],e[i]))}}e.length>0&&"my"!=t&&$("#currently_viewing_list").append("<li id='"+t+"currentlyviewing' class='collection-item'><div>"+facebook_name_key[t]+"<a style='color: "+unitcolor.friendstatic+"' onclick='removethisguy("+t+")' class='secondary-content'><i class='material-icons'>clear</i></a></div></li>")}else"my"==t||e!=[]&&0!=e.length?(loading=document.getElementById("timetableuploadtab"),loading.style.visibility="visible",document.getElementById("calendarviewtab").style.display="none",addfilelist(),$("ul.tabs").tabs("select_tab","timetableupload")):alert("Your friend hasn't uploaded their timetable")}function WriteText(e,t){e.innerHTML=t}function convertToList(e){var t=[];for(var o in e)t.push(o);return t}shown=0;var getdata={setfacebook:function(e,t){"string"==typeof t&&null!=t&&""!=t?localStorage.setItem(e+"facebook_friends",t):null!=t&&localStorage.setItem(e+"facebook_friends",JSON.stringify(t))},getfacebook:function(e){if(null!=localStorage.getItem(e+"facebook_friends"))return JSON.parse(localStorage.getItem(e+"facebook_friends"));firebase.database().ref("users/"+e+"/facebook_friends/").once("value").then(function(t){var o=t.val();return getdata.setfacebook(e,o),o})},getdatafromdb:function(e,t){"classes"==t&&firebase.database().ref("users/"+e+"/classes/").once("value").then(function(o){var n=o.val();if(null==n&&void 0==n)return alert("Contact us... quote (that impossible null returned from getdatafromdb)"),null;getdata.setproperty(e,n,t),timetablesur=n,location.reload()})},isaproperty:function(e,t){return null==localStorage.getItem(e+t)||""==localStorage.getItem(e+t)},getproperty:function(e,t){return null!=localStorage.getItem(e+t)&&null!=JSON.parse(localStorage.getItem(e+t))?JSON.parse(localStorage.getItem(e+t)):null},setproperty:function(e,t,o){"string"==typeof t&&null!=t?localStorage.setItem(e+o,JSON.stringify(t)):null!=t&&localStorage.setItem(e+o,JSON.stringify(t))},clearfacebook:function(e){localStorage.removeItem(e+"facebook_friends")}};uid="",weektodays={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},initApp=function(){firebase.auth().onAuthStateChanged(function(e){if(e){var t=e.displayName,o=e.email;e.emailVerified,e.photoURL;uid=e.uid,e.getIdToken().then(function(n){uid=e.uid,firebase.database().ref("users/"+uid+"/email").set(o),firebase.database().ref("users/"+uid+"/display_name").set(t),firebase.database().ref("id_to_name/"+uid).set(t),document.getElementById("useremail").innerHTML=o,document.getElementById("userdisplayname").innerHTML=t}),myfriendlookup={},myfriendlookup=getdata.getproperty(uid,"myfriendlookup"),myfriendlookup;var n=["Click on a class to view details.","Click the eye in the top right corner to see who's seen your timetable","Click button in bottom right corner for options with your calendar.","Message us on facebook for a quick reply."],a=getRandomInt(0,n.length-1);$("#tipthistime").html("<strong>Tip: </strong>"+n[a]),ShowFbFriend(),myfriends=getdata.getproperty(uid,"friends");var i=document.getElementById("importantmessage"),l=document.getElementById("logincomponents");getdata.isaproperty(uid,"classes")?firebase.database().ref("requests/"+uid+"/status").on("value",function(e){var t=e.val();null==t?(ShowSomething(document.getElementById("logincomponents")),document.getElementById("message_mobile").innerHTML="Allocate+ only allows downloading timetable on desktop devices. <br> Use a computer to upload your timetable.",$("#message_mobile").toggleClass("orange-text"),drawoncalendar(null,"my")):null!=t&&-1!=t.indexOf("ERR")?(ShowSomething(document.getElementById("logincomponents")),ShowSomething(i),"ERRONELINE"==t?WriteText(i,"Please select all weeks and reupload your timetable file."):(alert("Error: Contact Us \n"+t),WriteText(i,"Error occured while processing your timetable, contact us.")),drawoncalendar(null,"my")):"UPLOAD"==t?(alert("Uploaded successfully"),HideSomething(l),ShowSomething(i),WriteText(i,"We'll be back in the time it takes to make instant noodles.")):"DOWNLOADED"==t?(alert("Your file is currently being proccessed!"),HideSomething(l),ShowSomething(i),WriteText(i,"Your file is being processed right now, hang tight...")):"SUCCESS"==t&&getdata.getdatafromdb(uid,"classes")}):(ShowSomething(l),ShowSomething(document.getElementById("calendar")),HideSomething(i),ShowSomething(document.getElementById("calendarviewtab")),ShowSomething(document.getElementById("calendar")),timetablesur=getdata.getproperty(uid,"classes"),timetablesur=convertToList(timetablesur),drawoncalendar(timetablesur,"my"),$("ul.tabs").tabs("select_tab","calendarviewtab"))}else loading=document.getElementById("logincomponents"),loading.style.display="none",alert("You're logged out..."),window.location="../"},function(e){alert("Error signing in\n"+e)})},window.addEventListener("load",function(){initApp()})</script><script>function drawFriendOnCalendar(e){if(toggleload(),null==locallstoredsessionclasses[e])firebase.database().ref("facebook_to_id/"+e).once("value").then(function(n){var t=n.val();null!=t?firebase.database().ref("users/"+t+"/classes/").once("value").then(function(n){var a=n.val();a=convertToList(a),locallstoredsessionclasses[e]=a,null!=a||a.length<=0?(firebase.database().ref("/users/"+t+"/viewedby/"+uid).set({time:(new Date).toString()}),drawoncalendar(a,e)):alert("Friend hasn't uploaded timetable. "),toggleload()}):(alert("Facebook friend not in database yet..."),toggleload())});else{var n=locallstoredsessionclasses[e];null!=n&&n.length>0?(drawoncalendar(locallstoredsessionclasses[e],e),toggleload()):(alert("Friend hasn't uploaded their timetable yet."),toggleload())}}function elementin(e,n){return n in e}function getnondup(e,n){var t=[];for(i=0;i<e.length;i++)elementin(n,e[i])||t.push(e[i]);return t}function showInfoModal(e){var n=e.data.split("*");currentclassselected=e;var t=n[0],a=n[1].replace(/[0-9]/g,""),o=firebase.database().ref("seperate_unit_list/"+t+"/"+a);console.log("swaps/"+t+"/"+a+"/suggested/"+currentclassselected.data),o.once("value").then(function(n){var t=n.val();if(null!=t){var a=t.indexOf(e.data);a>=0&&t.splice(a,1);var o=t;if($("#dropdownofswapspossible").innerHTML="<option disabled >Loading...</option>",$("select").material_select(),null!=o&&o.length>0){var l="<option disabled >Click for smart suggestions</option>";for(a=0;a<o.length;a++)if(!elementin(timetablesur,o[a])){var i=o[a].split("*");l+="<option value='"+t[a]+"'>"+i[2]+" "+i[3]+"</option>"}$("select").material_select("destroy"),""!=l?$("#dropdownofswapspossible").html(l):$("#dropdownofswapspossible").html("<option disabled >No swaps available</option>")}else $("#dropdownofswapspossible").html("<option disabled >No swaps available</option>");$("select").material_select()}showprefs(currentclassselected.data)});var l=e.data;$("#class_fb_friends").html("Loading..."),$("#other_friends_counter").html("Loading..."),firebase.database().ref("classes/"+l+"/users/").once("value").then(function(e){var n=e.val();if($("#class_fb_friends").html(""),$("#other_friends_counter").html(""),Object.keys(n).length>=1){var t=0;for(var a in n)null!=myfriendlookup?a!=uid&&a in myfriendlookup?$("#class_fb_friends").append("<li class=\"collection-item\"><a target='_blank' href='//facebook.com/"+myfriendlookup[a]+"'>"+facebook_name_key[myfriendlookup[a]]+"</a></li>"):a==uid||a in myfriendlookup||t++:t=Object.keys(n).length;$("#other_friends_counter").html("There "+(1==t?"is":"are")+" "+t+" other "+(1==t?" person":" people")+"  in your class who use Unilyf Monash")}});var i=e.data;$("#gdriveLink").html("Loading..."),firebase.database().ref("classes/"+i+"/parentFolder/").once("value").then(function(e){console.log(e.val());var n=e.val();null!=n?($("#gdriveLink").html("Class GDrive Folder"),$("#gdriveLink").attr("href","https://drive.google.com/drive/folders/"+n)):($("#gdriveLink").html(""),$("#gdriveLink").attr("href","#"))}),$("#moreinfodialog").modal("open")}function getRandomInt(e,n){return Math.floor(Math.random()*(n-e+1))+e}function createEventCalendarWithTime(e,n,t,a,o,l){try{newEvent={},"---"==t?(newEvent.title=a,newEvent.description=""):(newEvent.title="",newEvent.description=""),newEvent.start=new Date(new Date(n).getTime()+3e5),o=o.replace("~","."),newEvent.end=new Date(n.getTime()+60*o*60*1e3),newEvent.allDay=!1,newEvent.color=e,newEvent.data=l,newEvent.e=t,$("#calendar").fullCalendar("renderEvent",newEvent,"stick")}catch(e){}}function convertvaltolist(e){o=[];for(var n in e)o.push(e[n]);return o}function getRandomColor(){for(var e="#",n=0;n<6;n++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}ashown=0,$(document).ready(function(){$(".button-collapse").sideNav({menuWidth:230,draggable:!0}),$(".collapsible").collapsible(),$("select").material_select(),$(".modal").modal({dismissible:!0,opacity:.99,inDuration:300,outDuration:200,startingTop:"4%",endingTop:"10%",ready:function(e,n){},complete:function(){}});try{calendar=$("#calendar"),calendar.fullCalendar({editable:!1,handleWindowResize:!0,weekends:!1,defaultView:"agendaWeek",contentHeight:"auto",header:!1,minTime:"08:00:00",maxTime:"21:00:00",columnFormat:{week:"ddd"},allDaySlot:!1,displayEventTime:!0,eventClick:function(e){if("---"==e.e){var n=e.data.split("*");document.getElementById("eventdescription").innerHTML=n[0]+" "+n[1];var t=e.start._d;dayindextoday={1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday"},document.getElementById("eventtime").innerHTML=dayindextoday[t.getDay()]+"\t"+("00"+t.getHours().toString()).slice(-2)+":"+("00"+t.getMinutes().toString()).slice(-2),currentevent=e,showInfoModal(currentevent)}}})}catch(e){}})</script><style>footer,header,main{padding-left:230px}#importantmessage{padding-left:2%}#dropZone ol li p{font-size:1.3em;color:grey}@media only screen and (max-width:992px){footer,header,main{padding-left:0}}.fc-today{opacity:0;border:none}.opaque{opacity:.15}@media print{header{display:none}#tipthistime{display:none}footer,header,main{padding-left:0}.fixed-action-btn{display:none}#calendarviewtab{display:none}#calendar{display:block}#currently_viewing_list{display:block}.l8{width:100%;float:left}.l4{display:none}}</style><div id=fb-root></div><script>function logoff(){try{getdata.clearfacebook(uid),FB.logout()}catch(e){}firebase.auth().signOut()}function removethisguy(e){$("#"+e+"color").css("background","white"),$("#"+e+"cbview").prop("checked",!1);try{$("#"+e+"currentlyviewing").remove()}catch(e){}var t=$("#calendar").fullCalendar("clientEvents"),a=[];for(var o in t)"---"!=t[o].e&&t[o].e==e&&($("#calendar").fullCalendar("removeEvents",t[o]._id),a.push(t[o]._id))}function ShowFbFriend(){facebook_name_key=getdata.getfacebook(uid),null==getdata.getproperty(uid,"showfb")&&getdata.setproperty(uid,0,"showfb"),(getdata.getproperty(uid,"showfb")%5==0||0==getdata.getproperty(uid,"showfb")||2==getdata.getproperty(uid,"showfb"))&&getdata.getproperty(uid,"showfb")<30&&alert("Please connect to facebook for an enhanced expereince."),getdata.setproperty(uid,getdata.getproperty(uid,"showfb")+1,"showfb");var e=convertToList(facebook_name_key);if(autocompletefbdata={},fbfriendsnametoid={},null!=e){$("#listfacebookfriends").html('<li class="collection-header"><a><h6 onclick="LoadFBUI()">Facebook Friends<i class="material-icons">refresh</i></h6></a></li>');try{var t=getdata.getproperty(uid,"showfb");for(e.length<4&&(t%7==0||5==t)&&$("#invitemodal").modal("open"),i=0;i<e.length;i++)autocompletefbdata[facebook_name_key[e[i]]]=null,fbfriendsnametoid[facebook_name_key[e[i]]]=e[i],$("#listfacebookfriends").append("<li  class='collection-item' style='padding-left: 2px'><div class='row'style='margin-bottom: 0px'> <div class=\"col s9\"> <input type=\"checkbox\" name='selectedfbfriends' value='"+e[i]+'\' class="filled-in" id="'+e[i]+"cbview\" /> <label class='truncate black-text' for=\""+e[i]+'cbview">'+facebook_name_key[e[i]]+"</label> </div><div id='"+e[i]+"color' style='height: 20px' class='col s1'></div><div class='col center offset-s1 s1'><a class='black-text' target='_blank' href='//facebook.com/"+e[i]+'\'><i class="material-icons">face</i></a></div> </div> </li>');$("input[name=selectedfbfriends]").change(function(){var e=$(this).val().toString();$(this).is(":checked")?drawFriendOnCalendar(e):($("#"+e+"cbview").prop("checked",!1),removethisguy(e))})}catch(e){}}$("#autocomplete-input-1").autocomplete({data:autocompletefbdata,limit:20,onAutocomplete:function(e){var t=fbfriendsnametoid[e];$("#"+t+"cbview").is(":checked")?($("#"+t+"cbview").prop("checked",!1),removethisguy(t)):($("#"+t+"cbview").prop("checked",!0),drawFriendOnCalendar(t)),$("#autocomplete-input-1").val("")},minLength:1})}function HideSomething(e){e.style.display="none"}function ShowSomething(e){e.style.display="block",e.style.visibility="visible"}function showprefs(e){var t=e.split("*"),a=t[0],o=t[1].replace(/[0-9]/g,"");firebase.database().ref("swaps/"+a+"/"+o+"/"+uid).once("value").then(function(e){var t=e.val();if($("#currprefslist").html(""),null!=t&&t.length>1)for(var a=1;a<t.length;a++){var o=t[a].split("*");$("#currprefslist").append("<tr><td>"+o[2]+" "+o[3]+"</td></tr>")}else $("#currprefslist").append("<tr><td>No preferences submitted yet.</td></tr>")})}function sendClassSwapPref(){var e=$("option:selected").map(function(){return this.value}).get(),t=null;if(null!=e){for(var a=[currentclassselected.data],o=0;o<e.length;o++){var i=(t=e[o].split("*"))[0],n=t[1].replace(/[0-9]/g,"");a.push(e[o]),firebase.database().ref("swaps/"+i+"/"+n+"/"+uid).set(a)}showprefs(currentclassselected.data),alert("Your preferences have been saved. We'll notify you shortly!")}}function GenerateMyFriendLookup(e,t){firebase.database().ref("id_to_facebook/"+e).once("value").then(function(t){var a=t.val();null==myfriendlookup&&(myfriendlookup={}),myfriendlookup[e]=a,getdata.setproperty(uid,myfriendlookup,"myfriendlookup"),myfriendlookup=getdata.getproperty(uid,"myfriendlookup")})}function AddFriendsWithFacebook(e){for(var t in e)firebase.database().ref("facebook_to_id/"+t).once("value").then(function(e){var a=e.val();null!=a&&(firebase.database().ref("/users/"+uid+"/friends/"+a).set("I"),GenerateMyFriendLookup(a,t))})}function LoadFBUI(){FB.login(function(e){e.authResponse&&(fuid=e.authResponse.userID,firebase.database().ref("facebook_to_id/"+fuid).set(uid),firebase.database().ref("id_to_facebook/"+uid).set(fuid),FB.api("/me/friends",function(e){if(e&&!e.error){for(var t=e.data,a={},o=0;o<t.length;o++)a[t[o].id]=t[o].name;getdata.setfacebook(uid,a),firebase.database().ref("/users/"+uid+"/facebook_friends").set(a),AddFriendsWithFacebook(a),ShowFbFriend()}}))},{scope:"email, user_friends"})}locallstoredsessionclasses={},window.fbAsyncInit=function(){FB.init({appId:"1913393705562842",cookie:!0,xfbml:!0,version:"v2.8"}),FB.AppEvents.logPageView()},function(e,t,a){var o,i=e.getElementsByTagName(t)[0];e.getElementById(a)||((o=e.createElement(t)).id=a,o.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(o,i))}(document,"script","facebook-jssdk"),uid=0</script><header><nav class=blue><ul class="fixed side-nav"id=slide-out><li><div class=userView><a href=#><img class=circle src=profilepicdefault.png id=profileimage></a><a href=#><span id=userdisplayname class="black-text name"></span></a> <a href=#><span id=useremail class="black-text email"style=font-size:.8em></span></a></div></li><script>function showPreviousViews(){$("#viewing_recent").html("Loading..."),firebase.database().ref("users/"+uid+"/viewedby/").once("value").then(function(e){$("#viewing_recent").html("");var a=e.val();for(var t in a)try{var r=new Date(a[t].time);if(null!=facebook_name_key[myfriendlookup[t]]){var o={0:"January",1:"Feburary",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};$("#viewing_recent").append("<tr><td>"+facebook_name_key[myfriendlookup[t]]+"</td><td>"+r.getDate()+"\t"+o[r.getMonth()]+"</td></tr>")}else 0==qwerty&&(alert("We recommend connecting with facebook again to get new friends."),qwerty++)}catch(e){}}),$("#modalsrs").modal("open"),ga("send","event","Views","whoviewed","Campaign")}function clearLocalStorage(){if(confirm("Are you sure you want to clear your data?")){var e=getdata.getproperty(uid,"classes");for(var a in e)firebase.database().ref("/classes/"+a+"/users/"+uid).set(null);localStorage.removeItem(uid+"classes"),firebase.database().ref("/requests/"+uid).set(null),firebase.database().ref("/users/"+uid+"/classes").set(null),firebase.database().ref("/deleted/"+uid).set("A"),location.reload()}}function setURLembed(){$("#contactuspage").attr("src","https://docs.google.com/forms/d/e/1FAIpQLSc0mTqbJ9LJPCO4zskNv4IJJVvtIbG83AxwZkgaQHnjMuA27w/viewform?embedded=true")}function feedbackURLembed(){$("#feedback").attr("src","https://docs.google.com/forms/d/e/1FAIpQLSe1hK5L0TBWeMAq4go7TEEZQwN7heKumIEXIuAtKTfylBaklA/viewform?embedded=true")}$(document).ready(function(){$(".modal").modal()});var qwerty=0</script><li><a class=subheader>Actions</a><li><a href=#modalcontact2 onclick=feedbackURLembed()><i class=material-icons>create</i>Clear Data</a><li><a href=#modalcontact onclick=setURLembed()><i class=material-icons>drafts</i>Contact Us</a><li><a href=https://groups.google.com/forum/#!forum/unilyf-monash target=_blank><i class=material-icons>help</i>Help</a><li><a onclick=logoff()><i class=material-icons>close</i>Log off</a></ul><div class=nav-wrapper><a href=../ class="center brand-logo">Unilyf Monash</a><ul class=show-on-med-and-down><li><a href=# class=button-collapse data-activates=slide-out><i class="material-icons right">menu</i></a></ul><ul class=right><li><a href=# onclick=showPreviousViews()><i class=material-icons>remove_red_eye</i></a><li><a href=#notifmodal onclick=showNotif()><i class=material-icons>notifications</i></a></ul></div></nav></header><main><h4 id=importantmessage style=display:none></h4><h4 id=firebaseui-auth-container style=display:none class=center><a href=../ >Login</a></h4><p style=padding-left:2%><strong>The website best works when you <a onclick=LoadFBUI() style=cursor:hand>connect to facebook.</a></strong><br><span id=message_mobile>Click on the class to see who is in it!</span><div class=row id=logincomponents style=visibility:hidden;padding-bottom:70px><div class="col s12 m12 l8 x"><ul class=tabs id=tabs-swipe-demo><li class="col l3 s4 tab"><a href=#calendarview class=active id=calendarviewtab>Calendar View</a><li class="col l3 s4 tab"style=visibility:hidden><a href=#timetableupload id=timetableuploadtab>Timetable Upload</a></ul><br><div class="col s12"id=calendarview><div class="col s12 l12"><div id=calendar></div>`<ul class="collection with-header"id=currently_viewing_list><li class=collection-header><h5>Currently comparing</h5><li class=collection-item style=color:#ff8b00 id=tipthistime></ul></div></div><script>function showNotif(){firebase.database().ref("users/"+uid+"/notifications/").once("value").then(function(o){var t=o.val();console.log(t);for(var e in t)if(console.log(e),"text"==t[e].type){var a=t[e].time,n=t[e].message;$("#tabnotifications").append("<tr><td>"+a+"</td><td>"+n+"</td></tr>")}}),$("#notifmodal").modal("open")}$(document).ready(function(){$(".collapsible").collapsible()})</script><div class="col s12"id=timetableupload><script>function addfilelist(){function e(e){if(e.size<2e6){var a=firebase.storage().ref().child("usertimetable/"+uid);task=a.put(e),task.on("state_changed",function(e){e.bytesTransferred,e.totalBytes;switch(e.state){case firebase.storage.TaskState.PAUSED:case firebase.storage.TaskState.RUNNING:}},function(e){alert("Couldn't upload \n "+e)},function(){firebase.database().ref("temp_requests/"+uid).set({status:"UPLOAD"}),firebase.database().ref("requests/"+uid).set({status:"UPLOAD"})})}else alert("Too big...")}var a=document.getElementById("dropZone");a.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"});var t=document.getElementById("fileInput");t.addEventListener("change",function(a){e(t.files[0])}),a.addEventListener("drop",function(a){a.stopPropagation(),a.preventDefault();var t=a.dataTransfer.files;if(1==t.length){var l=t[0];l.size<2e6?e(l):alert("File too big, contact us.")}else alert("Select one file only")})}function calcd(e){if(ga("send","event","CalendarAction",e,"Campaign"),null!=getdata.getproperty(uid,"classes")){var a=make(getdata.getproperty(uid,"classes"),e),t=getdata.getproperty(uid,"callink");"link"==e&&($("#modallink").modal("open"),$("#callink").html("Loading...")),"link"==e&&null==t?firebase.database().ref("users/"+uid+"/calLink/").once("value").then(function(e){var t=e.val();null!=t?($("#callink").html(t),getdata.setproperty(uid,t,"callink")):firebase.storage().ref().child("icses/"+uid+".ics").putString(a).then(function(e){console.log(e),console.log("Uploaded a raw string!"),getdata.setproperty(uid,e.downloadURL,"callink"),$("#callink").html(e.downloadURL),firebase.database().ref("users/"+uid+"/calLink/").set(e.downloadURL)})}):"link"==e&&null!=t&&$("#callink").html(getdata.getproperty(uid,"callink"))}else alert("Please upload your timetable.")}function clearLink(){localStorage.removeItem(uid+"callink"),firebase.database().ref("users/"+uid+"/calLink").set(null),$("#modallink").modal("close")}</script><h5 id=timetableuploadh5>We need your timetable!</h5><div class="col s12 l12 center"id=dropZone style="padding-bottom:150px;border:solid 2px #000"><ol style=text-align:left><li><p>Login in to Allocate+ and select the timetable tab.<li><p>Download the timetable text file (Make sure you select all weeks!)<li><p>Upload the file and you're on your way!</ol><img class=materialboxed src=allocatehelp.png width=100%><br><br><br><br><br><input class=center id=fileInput size=60 style=opacity:.4 type=file><br><br><br><br><p><strong>Or drag and drop betweeen the black border</strong></div></div><a href=#moreinfodialog></a><div class="modal modal-fixed-footer"id=moreinfodialog><div class=modal-content><h5>Activity Details</h5><p id=eventdescription>Description<p id=eventtime>Time<div class=row><a href=# target=_blank id=gdriveLink>Link to GDrive</a><div class="col s12 l12 m12 x12"><h5>Facebook Friends</h5><ul class="collection with-header"id=class_fb_friends style=overflow-y:auto;max-height:450px></ul><h6 class="center grey-text lighten-3"id=other_friends_counter></h6></div><div class="col s12 l12 m12 x12"><h6><strong>Swaps</strong></h6><div class="col s12 input-field"><select id=dropdownofswapspossible multiple></select></div><a class=right onclick=sendClassSwapPref()>Save preferences</a><br><br><h6><strong>Your current preferences</strong></h6><table id=currprefslist></table><br><br></div></div></div><div class=modal-footer><a href=#! class="btn-flat modal-action modal-close waves-effect">Close</a></div></div></div><div class="col s12 m12 l4 x4"><br><div class=row><div class="col s12"><div class=row><div class="col input-field s11"><i class="material-icons prefix">search</i> <input class=autocomplete id=autocomplete-input-1><label for=autocomplete-input-1>Search</label></div></div></div><div class="col s12"><div class="col s12 center valign-wrapper"><div class=fb-send data-href=https://learntog.github.io/ ></div><div class=fb-share-button style=padding:10px data-href=https://learntog.github.io/ data-layout=button_count data-mobile-iframe=true data-size=large><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearntog.github.io%2F&src=sdkpreparse"class=fb-xfbml-parse-ignore target=_blank>Share</a></div></div><ul class="collection with-header"id=listfacebookfriends style=overflow-y:auto;max-height:550px></ul><div class=center><div class=fb-page data-href=https://www.facebook.com/monashunilyf/ data-adapt-container-width=true data-height=400 data-hide-cover=true data-show-facepile=true data-small-header=true data-tabs=messages><blockquote cite=https://www.facebook.com/monashunilyf/ class=fb-xfbml-parse-ignore><a href=https://www.facebook.com/monashunilyf/ >Monash UniLyf</a></blockquote></div></div></div></div></div></div><div class="fixed-action-btn horizontal"><a class="btn-floating btn-large pulse red"><i class=material-icons>event</i></a><ul><li><a class="btn-floating green"onclick=window.print()><i class=material-icons>print</i></a><li><a class="btn-floating orange"onclick='calcd("download")'><i class=material-icons>file_download</i></a><li><a class="btn-floating blue"onclick='calcd("link")'><i class=material-icons>link</i></a></ul></div></main><div class=modal id=invitemodal><div class=modal-content style=padding-bottom:30%><h4>Invite your friends to this website</h4><p>We've noticed not many of your friends use Unilyf Monash. You can invite them to grow our community.<div class=fb-send data-href=https://learntog.github.io/ ></div><div class=fb-share-button style=padding:10px data-href=https://learntog.github.io/ data-layout=button_count data-mobile-iframe=true data-size=large><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flearntog.github.io%2F&src=sdkpreparse"class=fb-xfbml-parse-ignore target=_blank>Share</a></div></div></div><div class=modal id=modalsrs><div class=modal-content><h4>Recently viewed</h4><table id=viewing_recent></table></div></div><div class=modal id=modallink><div class=modal-content><h4>Your calendar URL</h4><p id=callink class=blue-text></p><br><h4>Useful links</h4><ol><li><a href=http://visihow.com/Use_webcal_url_to_add_a_calendar_to_google_calendar>Add a calendar using a link (Google Calendar)</a><br></ol><a class=grey-text onclick=clearLink()>Clear data</a></div></div><div class=modal id=modalcontact style=width:90%><div class=modal-content><iframe frameborder=0 height=500 id=contactuspage marginheight=0 marginwidth=0 src=""width=100%>Loading...</iframe></div></div><div class=modal id=modalcontact2 style=width:85%><div class=modal-dialog><iframe frameborder=0 height=500 id=feedback marginheight=0 marginwidth=0 src=""width=100%>Loading...</iframe></div><div class=modal-footer><button class="btn btn-danger"onclick=clearLocalStorage() role=button type=button>Clear Data</button></div></div><div class=modal id=notifmodal style=width:90%><div class=modal-content><h4>Notifications</h4><table id=tabnotifications></table></div></div><script src=https://www.gstatic.com/firebasejs/4.1.1/firebase.js></script><script>var config={apiKey:"AIzaSyBLA6sDqXwnMX6tJayM4dmYCPRzt5CW91M",authDomain:"learntogether-a250b.firebaseapp.com",databaseURL:"https://learntogether-a250b.firebaseio.com",projectId:"learntogether-a250b",storageBucket:"learntogether-a250b.appspot.com",messagingSenderId:"3175571907"};firebase.initializeApp(config)</script>